# N-Queen 
Created at : 2025-11-02 20:27
[baekjoon_9663](https://www.acmicpc.net/problem/9663)
### 조건
- 시간 : 10
- 메모리 : 128
### 문제
N-Queen 문제는 크기가 N × N인 체스판 위에 퀸 N개를 서로 공격할 수 없게 놓는 문제이다.

N이 주어졌을 때, 퀸을 놓는 방법의 수를 구하는 프로그램을 작성하시오.
### 입력
첫째 줄에 N이 주어진다. (1 ≤ N < 15)
### 출력
첫째 줄에 퀸 N개를 서로 공격할 수 없게 놓는 경우의 수를 출력한다.
### 제한
- 
### 예제
- 입력
```
8
```
- 출력
```
92
``` 

### 풀이
- My solution (시간 초과) => pypy3 (10900)
```python

def dfs(N):
    def backtracking(h_idx, x_rows, p_diag, m_diag):
        if N == len(x_rows) : #h_idx :
            ret.append(x_rows.copy())
            return
        elif N == h_idx:
            return
        else :
            for r_idx in range(N):    
                if r_idx not in x_rows and h_idx + r_idx not in p_diag and h_idx - r_idx not in m_diag :
                    x_rows.append(r_idx)
                    p_diag.append(h_idx + r_idx)
                    m_diag.append(h_idx - r_idx)
                    backtracking(h_idx+1, x_rows, p_diag, m_diag)
                    x_rows.pop()
                    p_diag.pop()
                    m_diag.pop()
                        
                    
    ret = []    
    backtracking(0 ,[],[],[]) 
    return ret


print(len(dfs(int(input()))))
```

- Answer(시간 초과) => pypy3 (28060)
```python
# 퀸끼리 서로 공격이 되는지 체크
def Check(depth):
    for i in range(depth):
        # 세로선상과 대각선상에 다른 퀸이 존재할 경우
        if board[depth] == board[i] or abs(board[depth] - board[i]) == depth - i:
            return False
    return True

# N개의 퀸을 서로 공격하지 않게 놓기 위한 DFS 탐색
def DFS(depth):
    global result

    # N개의 퀸을 서로 공격하지 않게 놓은 경우
    if depth == N:
        result += 1
        return

    # 반복문을 돌면서 퀸을 배치
    for i in range(N):
        board[depth] = i
        if Check(depth):
            DFS(depth + 1)


N = int(input())
board = [0 for i in range(N)]
result = 0

DFS(0)
print(result)
```

- Analyze
	- My Solution
		- 시간 복잡도를 계산하면 그렇게 많아보이지 않았는데, 확인해보니 시간 복잡도가 O(N^N)이라고 한다. 즉, N=15일때, 100만을 1초로 잡으면 23분 정도가 소요된다고 보면 된다. ~~풀이가 잘못되었다.~~
		- 풀이를 하자면, 아래와 같다.
	- ![[Pasted image 20251103234812.png]]
	- Answer
		- 아니, Answer를 아무리 해도 Time over가 나온다. 좀 더 찾아보니 python으론 힘든 거 같고 pypy3로 진행하니 된다. 오히려 내가 푼 코드가 더 빠르게 나왔다..
		- 대체적으로 알고리즘 문제는 pypy3가 더 빠르다고 한다. (이것도 실패했으면 C로 풀어야 하나 생각했다.)
![[Pasted image 20251103233511.png]]
### 알고리즘 분류
- 백트래킹