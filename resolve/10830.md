 # 행렬 제곱
Created at : 2025-12-23 19:51
[baekjoon_10830](https://www.acmicpc.net/problem/10830)
### 조건
- 시간 : 1
- 메모리 : 256
### 문제
크기가 $N*N$인 행렬 A가 주어진다. 이때, A의 B제곱을 구하는 프로그램을 작성하시오. 수가 매우 커질 수 있으니, $A^B$의 각 원소를 1,000으로 나눈 나머지를 출력한다.
### 입력
첫째 줄에 행렬의 크기 N과 B가 주어진다. (2 ≤ N ≤  5, 1 ≤ B ≤ 100,000,000,000)

둘째 줄부터 N개의 줄에 행렬의 각 원소가 주어진다. 행렬의 각 원소는 1,000보다 작거나 같은 자연수 또는 0이다.
### 출력
첫째 줄부터 N개의 줄에 걸쳐 행렬 A를 B제곱한 결과를 출력한다.
### 제한
- 
### 예제
- 입력
```
2 5
1 2
3 4
```
- 출력
```
69 558
337 406
``` 
- 입력
```
3 3
1 2 3
4 5 6
7 8 9
```
- 출력
```
468 576 684
62 305 548
656 34 412
``` 
- 입력
```
5 10
1 0 0 0 1
1 0 0 0 1
1 0 0 0 1
1 0 0 0 1
1 0 0 0 1
```
- 출력
```
512 0 0 0 512
512 0 0 0 512
512 0 0 0 512
512 0 0 0 512
512 0 0 0 512
``` 
### 풀이
- My solution
```python

def matrix_squared(A,B):
    N = len(A)
    ret = []
    for i in range(N):
        tmp_ret_list = []
        for j in range(N):
            tmp_ret = 0
            for z in range(N):
                tmp_ret+= A[i][z]*B[z][j]%1000
            tmp_ret_list.append(tmp_ret%1000)
        ret.append(tmp_ret_list)
    return ret

def power(A, N):
    ret = [[1 if i == j else 0 for j in range(len(A))] for i in range(len(A))]
    while N:
        if N%2 == 1:
            ret=matrix_squared(A,ret)
        A = matrix_squared(A,A)
        N//=2
    return ret

N,B = map(int,input().split())
A = []
for _ in range(N):
    A.append(list(map(int,input().split())))

for a in power(A,B):
    print(" ".join(str(_) for _ in a))
```

- Answer
```python

```

- Analyze
	- 거듭제곱을 반씩 나누어 진행하는 power()함수와 행을 곱해주는 matrix_squared() 함수를 만들어서 진행해 주었다.
	- 한 번 틀렸는데, 이전 코드는 제곱의 수(B)가 1승일 경우 자기 자신을 return했는데 주어진 조건에서 1000을 나눈 나머지 수를 간과했다.
		- 해결 방법으로서 ret의 초기 값으로 항등행렬을 넣어주었다.
### 알고리즘 분류
- 